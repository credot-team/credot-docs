(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{165:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return O})),n.d(t,"default",(function(){return u}));var a=n(3),l=n(7),b=n(0),r=n.n(b),i=n(167),c=n(520),d=n.n(c);d.a.initialize({startOnLoad:!0});var m=function(e){var t=e.chart;return Object(b.useEffect)((function(){d.a.contentLoaded()}),[]),r.a.createElement("div",{className:"mermaid"},t)},o={title:"\u914d\u5c0d\u7cfb\u7d71",sidebar_position:1},p={unversionedId:"project/01",id:"project/01",isDocsHomePage:!1,title:"\u914d\u5c0d\u7cfb\u7d71",description:"\u7248\u672c",source:"@site/docs/project/01.mdx",sourceDirName:"project",slug:"/project/01",permalink:"/credot-docs/docs/project/01",editUrl:"https://github.com/skynocover/credot-docs/tree/documentation/docs/project/01.mdx",version:"current",sidebarPosition:1,frontMatter:{title:"\u914d\u5c0d\u7cfb\u7d71",sidebar_position:1},sidebar:"docsSidebar",previous:{title:"\u4f7f\u7528 WebRTC",permalink:"/credot-docs/docs/advanced/webrtc"},next:{title:"\u5c08\u6848\u67b6\u69cb",permalink:"/credot-docs/docs/project/99"}},O=[{value:"\u7248\u672c",id:"\u7248\u672c",children:[]},{value:"\u8aaa\u660e",id:"\u8aaa\u660e",children:[]},{value:"\u9700\u6c42",id:"\u9700\u6c42",children:[]},{value:"\u6d41\u7a0b",id:"\u6d41\u7a0b",children:[{value:"\u9023\u7dda\u4e26\u9a57\u8b49",id:"\u9023\u7dda\u4e26\u9a57\u8b49",children:[]},{value:"\u52a0\u5165\u623f\u9593",id:"\u52a0\u5165\u623f\u9593",children:[]},{value:"\u9000\u51fa\u623f\u9593",id:"\u9000\u51fa\u623f\u9593",children:[]},{value:"\u81ea\u52d5\u5b8c\u6210\u914d\u5c0d",id:"\u81ea\u52d5\u5b8c\u6210\u914d\u5c0d",children:[]},{value:"\u624b\u52d5\u5b8c\u6210\u914d\u5c0d",id:"\u624b\u52d5\u5b8c\u6210\u914d\u5c0d",children:[]},{value:"\u4f7f\u7528\u623f\u9593 id \u9032\u5165\u623f\u9593",id:"\u4f7f\u7528\u623f\u9593-id-\u9032\u5165\u623f\u9593",children:[]},{value:"\u9032\u5165\u4e0d\u516c\u958b\u623f\u9593",id:"\u9032\u5165\u4e0d\u516c\u958b\u623f\u9593",children:[]}]},{value:"\u8cc7\u6599\u6b04\u4f4d",id:"\u8cc7\u6599\u6b04\u4f4d",children:[{value:"\u914d\u5c0d\u898f\u5247",id:"\u914d\u5c0d\u898f\u5247",children:[]},{value:"\u623f\u9593",id:"\u623f\u9593",children:[]},{value:"\u95dc\u806f: \u4f7f\u7528\u8005-\u623f\u9593",id:"\u95dc\u806f-\u4f7f\u7528\u8005-\u623f\u9593",children:[]},{value:"\u914d\u5c0d\u7bc4\u4f8b",id:"\u914d\u5c0d\u7bc4\u4f8b",children:[]}]},{value:"\u4f7f\u7528\u60c5\u5883",id:"\u4f7f\u7528\u60c5\u5883",children:[]},{value:"Api",id:"api",children:[]},{value:"Socket.io Event",id:"socketio-event",children:[]},{value:"\u5f85\u8a0e\u8ad6",id:"\u5f85\u8a0e\u8ad6",children:[]},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",children:[]}],j={toc:O};function u(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},j,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"\u7248\u672c"},"\u7248\u672c"),Object(i.b)("p",null,"MatchingSystem v0.0.0 (2021-05-24)"),Object(i.b)("h2",{id:"\u8aaa\u660e"},"\u8aaa\u660e"),Object(i.b)("p",null,"\u914d\u5c0d\u7cfb\u7d71\u662f\u4e00\u500b\u6cdb\u7528\u6027\u6975\u9ad8\u7684\u670d\u52d9\uff0c\u65e5\u5f8c\u6703\u628a\u6b64\u670d\u52d9\u4f5c\u70ba\u5fae\u670d\u52d9\u4e26\u90e8\u7f72\u5728\u96f2\u7aef\uff0c\u4e26\u8b93\u5176\u4ed6\u670d\u52d9\u5c0d\u5b83\u64cd\u4f5c"),Object(i.b)("p",null,"\u8a31\u591a\u61c9\u7528\u7a0b\u5f0f\u4e2d\u90fd\u6703\u6709\u914d\u5c0d\u7cfb\u7d71\u9019\u500b\u670d\u52d9\uff0c\u8209\u51e1\u96a8\u6a5f\u804a\u5929\u5ba4\u3001\u96a8\u6a5f\u8996\u8a0a\u3001\u904a\u6232\u623f\u9593\u3001\u5a92\u5408\u670d\u52d9\u7b49\u7b49..."),Object(i.b)("p",null,"\u800c\u5176\u4e2d\u5373\u6642\u914d\u5c0d\u7cfb\u7d71\u53c8\u662f\u66f4\u5e38\u4f7f\u7528\u7684\u670d\u52d9\uff0c\u8b93\u4f7f\u7528\u8005\u53ef\u4ee5\u5373\u6642\u914d\u5c0d"),Object(i.b)("h2",{id:"\u9700\u6c42"},"\u9700\u6c42"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u4ee5 nodejs \u642d\u914d socket.io \u5be6\u4f5c"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"socket.io \u76f4\u63a5\u4e0a v4"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u8cc7\u6599\u5eab\u4ee5\u95dc\u806f\u8cc7\u6599\u5eab\u8207 Redis \u70ba\u4e3b"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"\u914d\u5c0d\u7cfb\u7d71\u8003\u616e\u5230\u539f\u5b50\u64cd\u4f5c\uff0c\u6240\u4ee5\u4f7f\u7528\u95dc\u806f\u8cc7\u6599\u5eab"),Object(i.b)("li",{parentName:"ul"},"\u8003\u616e\u5230\u65e5\u5f8c\u6703\u4e0a\u96f2\u7aef\uff0c\u5efa\u8b70\u4f7f\u7528 postgres \u6216 mysql"),Object(i.b)("li",{parentName:"ul"},"Redis \u9664\u4e86\u505a cache \u5916\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u5be6\u73fe\u5fae\u670d\u52d9\u4e2d socket.io \u7684 Pub/Sub",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"\u53ef\u53c3\u8003 ",Object(i.b)("a",{parentName:"li",href:"https://socket.io/docs/v4/rooms/"},"https://socket.io/docs/v4/rooms/")," \u4e2d \u300cWith multiple Socket.IO servers\u300d\u7684\u6bb5\u843d"))))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u9700\u8003\u616e\u5230 scaling \u7684\u554f\u984c"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"\u8cc7\u6599\u5eab\u61c9\u8a72\u53ef\u4ea4\u7531\u96f2\u7aef\u670d\u52d9\u7ba1\u7406"),Object(i.b)("li",{parentName:"ul"},"socket.io \u5247\u53c3\u8003 Redis \u7684 Pub/Sub"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u7ba1\u7406\u54e1\u53ef\u5728\u5f8c\u53f0\u8a2d\u5b9a\u914d\u5c0d\u9805\u76ee\u8207\u914d\u5c0d\u898f\u5247"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"\u914d\u5c0d\u898f\u5247\u8acb\u53c3\u95b1\u4e0b\u65b9\u8cc7\u6599\u6b04\u4f4d\u7684\u914d\u5c0d\u898f\u5247"),Object(i.b)("li",{parentName:"ul"},"\u5148\u4e0d\u7528\u505a\u5f8c\u53f0\uff0c\u76f4\u63a5\u6539\u8cc7\u6599\u5eab\u6e2c\u8a66"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u524d\u53f0\u4f7f\u7528\u8005\u70ba firebase user\uff0c\u56e0\u6b64 socket.io \u9023\u7dda\u6642\u9808\u5148\u9a57\u8b49 firebase auth token\uff0c\u9a57\u8b49\u5931\u6557\u5247\u7acb\u5373\u65b7\u7dda")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u7cfb\u7d71\u4f9d\u64da\u8cc7\u6599\u5eab\u4e2d\u7684\u914d\u5c0d\u898f\u5247\u4f86\u9032\u884c\u914d\u5c0d"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"\u6bcf\u7b46\u914d\u5c0d\u90fd\u6703\u662f\u4e00\u500b socket.io \u7684 room\uff0c\u5efa\u8b70 room \u7684 id \u662f cuid"),Object(i.b)("li",{parentName:"ul"},"room \u72c0\u614b\u9700\u5b58\u5728\u8cc7\u6599\u5eab\uff0c\u4ee5\u4fbf\u67e5\u8a62\u72c0\u614b\u6216\u7dda\u4e0b\u914d\u5c0d")))),Object(i.b)("h2",{id:"\u6d41\u7a0b"},"\u6d41\u7a0b"),Object(i.b)("h3",{id:"\u9023\u7dda\u4e26\u9a57\u8b49"},"\u9023\u7dda\u4e26\u9a57\u8b49"),Object(i.b)(m,{chart:"\ngraph TD\n  Start[\u9023\u7dda\u958b\u59cb]\n  VerifyFirebase[\u9a57\u8b49firebase auth token]\n  CheckIfVerified{\u9a57\u8b49\u6210\u529f}\n  Connect[\u9023\u7dda]\n  Disconnect[\u65b7\u7dda]\n  KeepConnecting[\u4fdd\u6301\u9023\u7dda\u76f4\u81f3app\u6216web\u95dc\u9589]\n  Start --\x3e VerifyFirebase --\x3e CheckIfVerified\n  CheckIfVerified -- Yes --\x3e Connect --\x3e KeepConnecting\n  CheckIfVerified -- No --\x3e Disconnect\n",mdxType:"Mermaid"}),Object(i.b)("h3",{id:"\u52a0\u5165\u623f\u9593"},"\u52a0\u5165\u623f\u9593"),Object(i.b)(m,{chart:"\ngraph TD\n  SelectRuleId[\u6c7a\u5b9a\u914d\u5c0druleId]\n  PrepareDesiredRoomCondition[\u6e96\u5099desiredRoomCondition]\n  PrepareDesiredUserCondition[\u6e96\u5099desiredUserCondition]\n  PrepareRoomCondition[\u6e96\u5099roomCondition]\n  PrepareUserCondition[\u6e96\u5099userCondition]\n  SendMatchingRequest[\u9001\u51fa\u914d\u5c0d\u8acb\u6c42]\n  FindRooms[\u5c0b\u627eruleId\u76f8\u540c public=true status=pending\u7684\u623f\u9593]\n  CheckFoundRooms{\u5c0b\u627e\u6210\u529f}\n  CheckThroughFoundRooms[\u904d\u6b77\u5404\u500b\u623f\u9593]\n  CreateMatchingRoom[\u5275\u5efa\u914d\u5c0d\u623f\u9593]\n  UseRoomCondition[\u4ee3\u5165roomCondition]\n  UseUserCondition[\u4ee3\u5165userCondition]\n  WaitMatching[\u7b49\u5f85\u914d\u5c0d]\n  GetRuleFromTable[\u85c9\u7531\u914d\u5c0d\u898f\u5247\u8868\u627e\u51faroomMatchingRule]\n  CheckIfRoomMatchingRuleNull{roomMatchingRule==null}\n  CheckIfUserMatchingRuleNull{userMatchingRule==null}\n  CheckIfRoomMatched{\u6aa2\u67e5\u623f\u9593\u914d\u5c0d}\n  CheckIfUserMatched{\u4e00\u4e00\u6aa2\u67e5\u4f7f\u7528\u8005\u914d\u5c0d}\n  MatchingCompleted[\u5b8c\u6210\u914d\u5c0d\u52a0\u5165\u623f\u9593]\n  SelectRuleId --\x3e PrepareDesiredRoomCondition --\x3e PrepareDesiredUserCondition --\x3e PrepareRoomCondition --\x3e PrepareUserCondition --\x3e SendMatchingRequest\n  SendMatchingRequest --\x3e FindRooms --\x3e CheckFoundRooms\n  CheckFoundRooms --\x3e No --\x3e CreateMatchingRoom --\x3e UseRoomCondition --\x3e UseUserCondition --\x3e WaitMatching\n  CheckFoundRooms --\x3e Yes --\x3e CheckThroughFoundRooms --\x3e GetRuleFromTable --\x3e CheckIfRoomMatchingRuleNull\n  CheckIfRoomMatchingRuleNull -- Yes --\x3e CheckIfUserMatchingRuleNull\n  CheckIfRoomMatchingRuleNull -- No --\x3e CheckIfRoomMatched\n  CheckIfRoomMatched -- Yes --\x3e CheckIfUserMatchingRuleNull\n  CheckIfRoomMatched -- No --\x3e CheckThroughFoundRooms\n  CheckIfUserMatchingRuleNull -- Yes --\x3e MatchingCompleted\n  CheckIfUserMatchingRuleNull -- No --\x3e CheckIfUserMatched\n  CheckIfUserMatched -- Yes --\x3e MatchingCompleted\n  CheckIfUserMatched -- No --\x3e CheckThroughFoundRooms\n",mdxType:"Mermaid"}),Object(i.b)("h3",{id:"\u9000\u51fa\u623f\u9593"},"\u9000\u51fa\u623f\u9593"),Object(i.b)(m,{chart:"\ngraph TD\n  id[\u9001\u51fa\u9000\u51fa\u623f\u9593\u6307\u4ee4]\n",mdxType:"Mermaid"}),Object(i.b)("h3",{id:"\u81ea\u52d5\u5b8c\u6210\u914d\u5c0d"},"\u81ea\u52d5\u5b8c\u6210\u914d\u5c0d"),Object(i.b)(m,{chart:"\ngraph TD\n  id[\u5230\u9054\u623f\u9593\u4eba\u6578\u4e0a\u9650\u81ea\u52d5\u5b8c\u6210\u914d\u5c0d]\n",mdxType:"Mermaid"}),Object(i.b)("h3",{id:"\u624b\u52d5\u5b8c\u6210\u914d\u5c0d"},"\u624b\u52d5\u5b8c\u6210\u914d\u5c0d"),Object(i.b)(m,{chart:"\ngraph TD\n  id[\u4f7f\u7528\u8005\u70baholder\u4e14\u4eba\u6578\u5927\u65bc\u7b49\u65bc\u623f\u9593\u4eba\u6578\u4e0b\u9650]\n",mdxType:"Mermaid"}),Object(i.b)("h3",{id:"\u4f7f\u7528\u623f\u9593-id-\u9032\u5165\u623f\u9593"},"\u4f7f\u7528\u623f\u9593 id \u9032\u5165\u623f\u9593"),Object(i.b)("h3",{id:"\u9032\u5165\u4e0d\u516c\u958b\u623f\u9593"},"\u9032\u5165\u4e0d\u516c\u958b\u623f\u9593"),Object(i.b)("h2",{id:"\u8cc7\u6599\u6b04\u4f4d"},"\u8cc7\u6599\u6b04\u4f4d"),Object(i.b)("h3",{id:"\u914d\u5c0d\u898f\u5247"},"\u914d\u5c0d\u898f\u5247"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"key"),Object(i.b)("th",{parentName:"tr",align:null},"type"),Object(i.b)("th",{parentName:"tr",align:null},"desc"),Object(i.b)("th",{parentName:"tr",align:null},"example"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"id"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"string")),Object(i.b)("td",{parentName:"tr",align:null},"\u914d\u5c0d\u898f\u5247 id"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"RANDOM_CHAT"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"minUserCount"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"number")),Object(i.b)("td",{parentName:"tr",align:null},"\u914d\u5c0d\u4eba\u6578\u4e0b\u9650"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"2"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"maxUserCount"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"number")),Object(i.b)("td",{parentName:"tr",align:null},"\u914d\u5c0d\u4eba\u6578\u4e0a\u9650"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"2"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"cancelMatchingWhenDisconnected"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"boolean")),Object(i.b)("td",{parentName:"tr",align:null},"\u65b7\u7dda\u6642\u7d50\u675f\u914d\u5c0d"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"true"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"deleteRoomWhenAllDisconnected"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"boolean")),Object(i.b)("td",{parentName:"tr",align:null},"\u5168\u54e1\u65b7\u7dda\u6642\u522a\u9664\u623f\u9593"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"false"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"pendingMaxAge"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"number")),Object(i.b)("td",{parentName:"tr",align:null},"\u914d\u5c0d\u6700\u9577\u6642\u9593 (s)"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"60 * 60 * 1000"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"roomMatchingRule"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"JSON")," ","|"," ",Object(i.b)("inlineCode",{parentName:"td"},"null")),Object(i.b)("td",{parentName:"tr",align:null},"\u623f\u9593\u914d\u5c0d\u898f\u5247"),Object(i.b)("td",{parentName:"tr",align:null},"\u8acb\u53c3\u8003\u4e0b\u65b9")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"userMatchingRule"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"JSON")," ","|"," ",Object(i.b)("inlineCode",{parentName:"td"},"null")),Object(i.b)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005\u914d\u5c0d\u898f\u5247"),Object(i.b)("td",{parentName:"tr",align:null},"\u8acb\u53c3\u8003\u4e0b\u65b9")))),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'// operators\n// eq : equal\n// ne : not equal\n// gt : greater than\n// gte : greater than or equal\n// lt : less than\n// lte : less than or equal\n// between : between\n// notbetween : not between\n// in : in an array\n// notin : not in an array\n{\n  "gender": "in",\n  "age": "between",\n  "city": "in"\n}\n')),Object(i.b)("h3",{id:"\u623f\u9593"},"\u623f\u9593"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"key"),Object(i.b)("th",{parentName:"tr",align:null},"type"),Object(i.b)("th",{parentName:"tr",align:null},"desc"),Object(i.b)("th",{parentName:"tr",align:null},"example"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"id"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"string")),Object(i.b)("td",{parentName:"tr",align:null},"\u623f\u9593 id"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"ckp26qc8w000201mlcvzmgw9d"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"ruleId"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"string")),Object(i.b)("td",{parentName:"tr",align:null},"\u914d\u5c0d\u898f\u5247 id"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"RANDOM_CHAT"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"holder"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"string")),Object(i.b)("td",{parentName:"tr",align:null},"\u6301\u6709\u8005 id"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"user01"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"roomCondition"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"JSON")),Object(i.b)("td",{parentName:"tr",align:null},"\u623f\u9593\u914d\u5c0d\u689d\u4ef6"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},'{ "city": "Taipei" }'))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"public"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"boolean")),Object(i.b)("td",{parentName:"tr",align:null},"\u662f\u5426\u516c\u958b"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"true"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"status"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},'"pending"')," ","|"," ",Object(i.b)("inlineCode",{parentName:"td"},'"completed"')),Object(i.b)("td",{parentName:"tr",align:null},"\u914d\u5c0d\u72c0\u614b"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"pending"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"pendingExpired"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"timestamp")),Object(i.b)("td",{parentName:"tr",align:null},"\u672a\u914d\u5c0d\u623f\u9593\u904e\u671f\u6642\u9593"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"2021-05-24T12:00:00.000Z"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"createdAt"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"timestamp")),Object(i.b)("td",{parentName:"tr",align:null},"\u5275\u5efa\u6642\u9593"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"2021-05-24T06:12:30.089Z"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"updatedAt"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"timestamp")),Object(i.b)("td",{parentName:"tr",align:null},"\u66f4\u65b0\u6642\u9593"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"2021-05-24T06:12:30.089Z"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"deletedAt"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"timestamp")," ","|"," ",Object(i.b)("inlineCode",{parentName:"td"},"null")),Object(i.b)("td",{parentName:"tr",align:null},"\u522a\u9664\u6642\u9593"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"null"))))),Object(i.b)("h3",{id:"\u95dc\u806f-\u4f7f\u7528\u8005-\u623f\u9593"},"\u95dc\u806f: \u4f7f\u7528\u8005-\u623f\u9593"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"key"),Object(i.b)("th",{parentName:"tr",align:null},"type"),Object(i.b)("th",{parentName:"tr",align:null},"desc"),Object(i.b)("th",{parentName:"tr",align:null},"example"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"uid"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"string")),Object(i.b)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005 id"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"user01"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"roomId"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"string")),Object(i.b)("td",{parentName:"tr",align:null},"\u623f\u9593 id"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"ckp26qc8w000201mlcvzmgw9d"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"userCondition"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"JSON")),Object(i.b)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005\u81ea\u8eab\u914d\u5c0d\u689d\u4ef6"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},'{ "gender": "male", "age": 25 }'))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"desiredUserCondition"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"JSON")),Object(i.b)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005\u9810\u671f\u914d\u5c0d\u689d\u4ef6"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},'{ "gender": ["female"], "age": [18, 30] }'))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"createdAt"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"timestamp")),Object(i.b)("td",{parentName:"tr",align:null},"\u5275\u5efa\u6642\u9593"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"2021-05-24T06:12:30.089Z"))))),Object(i.b)("h3",{id:"\u914d\u5c0d\u7bc4\u4f8b"},"\u914d\u5c0d\u7bc4\u4f8b"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"rule"),Object(i.b)("th",{parentName:"tr",align:null}),Object(i.b)("th",{parentName:"tr",align:null}))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null}),Object(i.b)("td",{parentName:"tr",align:null}),Object(i.b)("td",{parentName:"tr",align:null})),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null}),Object(i.b)("td",{parentName:"tr",align:null}),Object(i.b)("td",{parentName:"tr",align:null})))),Object(i.b)("h2",{id:"\u4f7f\u7528\u60c5\u5883"},"\u4f7f\u7528\u60c5\u5883"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"\u60c5\u5883"),Object(i.b)("th",{parentName:"tr",align:null},"\u96a8\u6a5f\u804a\u5929"),Object(i.b)("th",{parentName:"tr",align:null},"\u904a\u6232\u914d\u5c0d"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"minUserCount"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"2")),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"4"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"maxUserCount"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"2")),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"8"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"cancelMatchingWhenDisconnected"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"true")," or ",Object(i.b)("inlineCode",{parentName:"td"},"false")),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"true"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"deleteRoomWhenAllDisconnected"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"false")),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"true"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"roomMatchingRule"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"null")),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"{ ... }"))),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"userMatchingRule"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"{ ... }")),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"null"))))),Object(i.b)("h2",{id:"api"},"Api"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"method"),Object(i.b)("th",{parentName:"tr",align:null},"endpoint"),Object(i.b)("th",{parentName:"tr",align:null},"desc"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"GET"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"/api/user/:id/rooms")),Object(i.b)("td",{parentName:"tr",align:null})),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},"GET"),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"/api/user/:id/rooms/:id")),Object(i.b)("td",{parentName:"tr",align:null})))),Object(i.b)("h2",{id:"socketio-event"},"Socket.io Event"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"event"),Object(i.b)("th",{parentName:"tr",align:null},"params"),Object(i.b)("th",{parentName:"tr",align:null},"desc"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"matchingCompleted")),Object(i.b)("td",{parentName:"tr",align:null}),Object(i.b)("td",{parentName:"tr",align:null})))),Object(i.b)("h2",{id:"\u5f85\u8a0e\u8ad6"},"\u5f85\u8a0e\u8ad6"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u662f\u5426\u6709\u9700\u8981\u4f7f\u7528 socket.io\uff0c\u9084\u662f polling\uff1f")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u540c\u4e00\u500b\u4f7f\u7528\u8005\u4f7f\u7528\u4e0d\u540c\u88dd\u7f6e\u540c\u6642\u9023\u7dda\u7684\u89e3\u6c7a\u65b9\u5f0f\uff1f"))),Object(i.b)("h2",{id:"\u53c3\u8003\u8cc7\u6599"},"\u53c3\u8003\u8cc7\u6599"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://socket.io/docs/v4/server-api/"},"https://socket.io/docs/v4/server-api/"))))}u.isMDXComponent=!0},650:function(e,t,n){var a={"./locale":379,"./locale.js":379};function l(e){var t=b(e);return n(t)}function b(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}l.keys=function(){return Object.keys(a)},l.resolve=b,e.exports=l,l.id=650}}]);