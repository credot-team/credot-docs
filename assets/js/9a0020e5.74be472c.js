(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{121:function(e,r,t){"use strict";t.r(r),t.d(r,"frontMatter",(function(){return c})),t.d(r,"metadata",(function(){return l})),t.d(r,"toc",(function(){return i})),t.d(r,"default",(function(){return d}));var n=t(3),o=t(7),a=(t(0),t(166)),c={title:"docker\u5b89\u88dd",sidebar_position:1},l={unversionedId:"utils/graylog/docker",id:"utils/graylog/docker",isDocsHomePage:!1,title:"docker\u5b89\u88dd",description:"graylog",source:"@site/docs/utils/graylog/docker.md",sourceDirName:"utils/graylog",slug:"/utils/graylog/docker",permalink:"/credot-docs/docs/utils/graylog/docker",editUrl:"https://github.com/skynocover/credot-docs/tree/documentation/docs/utils/graylog/docker.md",version:"current",sidebarPosition:1,frontMatter:{title:"docker\u5b89\u88dd",sidebar_position:1},sidebar:"docsSidebar",previous:{title:"config",permalink:"/credot-docs/docs/utils/nginx/config"},next:{title:"Sendlog",permalink:"/credot-docs/docs/utils/graylog/sendlog"}},i=[{value:"graylog",id:"graylog",children:[]},{value:"yaml",id:"yaml",children:[{value:"setting",id:"setting",children:[]},{value:"version",id:"version",children:[]}]},{value:"caddy",id:"caddy",children:[]}],s={toc:i};function d(e){var r=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},s,t,{components:r,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"graylog"},"graylog"),Object(a.b)("p",null,Object(a.b)("a",{parentName:"p",href:"https://docs.graylog.org/en/4.0/pages/installation/docker.html"},"graylog-docker")),Object(a.b)("h2",{id:"yaml"},"yaml"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-yaml"},"version: '3'\nservices:\n  # MongoDB: https://hub.docker.com/_/mongo/\n  mongo:\n    image: mongo\n    networks:\n      - graylog\n  # Elasticsearch: https://www.elastic.co/guide/en/elasticsearch/reference/7.10/docker.html\n  elasticsearch:\n    image: docker.elastic.co/elasticsearch/elasticsearch-oss:7.10.2\n    environment:\n      - http.host=0.0.0.0\n      - transport.host=localhost\n      - network.host=0.0.0.0\n      - 'ES_JAVA_OPTS=-Xms512m -Xmx512m'\n      - http.cors.allow-origin=\"*\"\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    deploy:\n      resources:\n        limits:\n          memory: 1g\n    networks:\n      - graylog\n  # Graylog: https://hub.docker.com/r/graylog/graylog/\n  graylog:\n    image: graylog/graylog:4.0.7\n    environment:\n      # CHANGE ME (must be at least 16 characters)!\n      - GRAYLOG_PASSWORD_SECRET=somepasswordpepper\n      # Password: admin\n      - GRAYLOG_ROOT_PASSWORD_SHA2=8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918\n      - GRAYLOG_HTTP_EXTERNAL_URI=http://127.0.0.1:9000/\n    entrypoint: /usr/bin/tini -- wait-for-it elasticsearch:9200 --  /docker-entrypoint.sh\n    networks:\n      - graylog\n    restart: always\n    depends_on:\n      - mongo\n      - elasticsearch\n    ports:\n      # Graylog web interface and REST API\n      - 9000:9000\n      # Syslog TCP\n      - 1514:1514\n      # Syslog UDP\n      - 1514:1514/udp\n      # GELF TCP\n      - 12201:12201\n      # GELF UDP\n      - 12201:12201/udp\nnetworks:\n  graylog:\n    driver: bridge\n")),Object(a.b)("h3",{id:"setting"},"setting"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"GRAYLOG_ROOT_PASSWORD_SHA2: \u88ab hash \u904e\u7684\u5bc6\u78bc"),Object(a.b)("li",{parentName:"ul"},"GRAYLOG_HTTP_EXTERNAL_URI: \u8a2d\u5b9a\u5916\u90e8 url \u907f\u514d\u8de8\u57df"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",{parentName:"li",href:"https://docs.graylog.org/en/4.0/pages/installation/docker.html#how-to-get-log-data-in"},"\u8a2d\u5b9aInput"))),Object(a.b)("h3",{id:"version"},"version"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",{parentName:"li",href:"https://www.docker.elastic.co/r/elasticsearch/elasticsearch-oss"},"elasticsearch-oss-version")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",{parentName:"li",href:"https://hub.docker.com/r/graylog/graylog/tags?page=1&ordering=last_updated"},"graylog-version"))),Object(a.b)("h2",{id:"caddy"},"caddy"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-caddy"},"graylog.credot.ml:80 {\n  reverse_proxy /gelf localhost:12201\n  reverse_proxy localhost:9000\n}\n")))}d.isMDXComponent=!0},166:function(e,r,t){"use strict";t.d(r,"a",(function(){return g})),t.d(r,"b",(function(){return b}));var n=t(0),o=t.n(n);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=o.a.createContext({}),d=function(e){var r=o.a.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):l(l({},r),e)),t},g=function(e){var r=d(e.components);return o.a.createElement(s.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return o.a.createElement(o.a.Fragment,{},r)}},u=o.a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,a=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),g=d(t),u=n,b=g["".concat(c,".").concat(u)]||g[u]||p[u]||a;return t?o.a.createElement(b,l(l({ref:r},s),{},{components:t})):o.a.createElement(b,l({ref:r},s))}));function b(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var a=t.length,c=new Array(a);c[0]=u;var l={};for(var i in r)hasOwnProperty.call(r,i)&&(l[i]=r[i]);l.originalType=e,l.mdxType="string"==typeof e?e:n,c[1]=l;for(var s=2;s<a;s++)c[s]=t[s];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);